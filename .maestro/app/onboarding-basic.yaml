appId: com.vaedros.unquest.development
---
- clearState
- launchApp

# Wait for app to fully load
- waitForAnimationToEnd

# Handle dev environment
- runFlow:
    when:
      visible: 'Development servers'
    commands:
      - tapOn: 'http://10.0.2.2:8081'
      - waitForAnimationToEnd

- runFlow:
    when:
      visible: 'Continue'
    commands:
      - tapOn: 'Continue'
      - waitForAnimationToEnd

- runFlow:
    when:
      visible: 'Go home'
    commands:
      - tapOn: 'Go home'
      - waitForAnimationToEnd

- runFlow:
    when:
      visible: 'Recently opened'
    commands:
      - tapOn:
          text: 'unQuest'
          below: 'Recently opened'
      - waitForAnimationToEnd

# Welcome screen
- assertVisible: 'unQuest'
- assertVisible: 'Begin New Journey'
- tapOn: 'Begin New Journey'

# Character name
- assertVisible: 'Your Character'
- tapOn: 'Enter character name'
- inputText: 'TestHero'
- tapOn: 'Continue'

# Character type
- assertVisible: "Choose TestHero's Character Type"
- assertVisible: 'ALCHEMIST'
- tapOn: 'Create Character'
- waitForAnimationToEnd

# Handle intro screens
- runFlow:
    when:
      visible: 'Welcome to unQuest'
    commands:
      - tapOn: 'Got it'
      - waitForAnimationToEnd

- runFlow:
    when:
      visible: 'Notifications'
    commands:
      - tapOn: 'Enable notifications'
      - waitForAnimationToEnd

# First quest
- extendedWaitUntil:
    visible: 'Your Journey Begins'
    timeout: 10000

- assertVisible: 'Wake up'
- takeScreenshot: 'before-wake-up-tap'

# Try tapping Wake up button - target the button area instead of just text
- tapOn:
    point: "50%, 95%"  # Tap near bottom where button is
- waitForAnimationToEnd

# Wait for navigation with longer timeout
- extendedWaitUntil:
    visible: 'Quest Ready'
    timeout: 20000

- assertVisible: 'Lock your phone to begin your quest'
- takeScreenshot: 'quest-ready-screen'

# Test complete up to quest ready screen
# The full test with 2-minute wait can be run separately